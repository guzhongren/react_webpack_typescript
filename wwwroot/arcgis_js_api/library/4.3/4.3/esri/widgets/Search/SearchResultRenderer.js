// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.3/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../Widget ../support/widget ./SearchViewModel dojo/i18n!./nls/Search".split(" "),function(c,r,n,f,k,p,d,q,m){c=function(c){function b(a){a=c.call(this)||this;a.showMoreResultsOpen=!1;a.viewModel=null;return a}n(b,c);b.prototype.render=function(){var a=this,l=this.get("viewModel.selectedResult"),e=this.get("viewModel.results"),l=l&&l.name||"",g=1<this._countResults(e),
c=g&&e.map(function(d){return a._moreResultsList(d)}),e=g?d.jsxFactory.createElement("div",{key:"esri-search-renderer__more-results-button",class:"esri-search-result-renderer__more-results-item"},d.jsxFactory.createElement("a",{href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?m.hideMoreResults:m.showMoreResults)):null,g=g?d.jsxFactory.createElement("div",{key:"esri-search-renderer__more-results-container",class:"esri-search-result-renderer__more-results-list"},
c):null,c=(b={},b["esri-search-result-renderer__more-results--show-more-results"]=this.showMoreResultsOpen,b);return d.jsxFactory.createElement("div",{class:"esri-search-result-renderer esri-widget"},d.jsxFactory.createElement("div",{key:"esri-search-renderer__container",class:"esri-search-result-renderer__more-results",classes:c},d.jsxFactory.createElement("div",{key:"esri-search-renderer__result-name",class:"esri-search-result-renderer__more-results-item"},l),d.jsxFactory.createElement("div",{key:"esri-search-renderer__more-results"},
e,g)));var b};b.prototype._showMoreResultsClick=function(a){a.preventDefault();this.showMoreResultsOpen=!this.showMoreResultsOpen;(a=this.get("viewModel.view.popup"))&&a.reposition()};b.prototype._selectResultClick=function(a){a.preventDefault();a=a.currentTarget["data-result"];this.viewModel&&this.viewModel.select(a)};b.prototype._moreResultsList=function(a){var c=this,e=a.results,b=e.length,f=!!b,h=this.get("viewModel.selectedResult"),b=1===b&&e[0]===h,h=this._getSourceName(a.source,a.sourceIndex),
h=1<this.get("viewModel.results").length&&!b?d.jsxFactory.createElement("div",{key:"esri-search-result-renderer__header-"+a.sourceIndex,class:"esri-search-result-renderer__more-results-list-header"},h):null,e=f&&e.map(function(a,b){return c._moreResultsListItem(a,b)}),e=f&&!b?d.jsxFactory.createElement("ul",{key:"esri-search-result-renderer__list-"+a.sourceIndex},e):null;return f?d.jsxFactory.createElement("div",{key:"esri-search-result-renderer__results-"+a.sourceIndex},h,e):null};b.prototype._moreResultsListItem=
function(a,b){var c=this.get("viewModel.selectedResult");return a!==c?d.jsxFactory.createElement("li",{key:"esri-search-result-renderer__list-item-"+b},d.jsxFactory.createElement("a",{href:"#",tabindex:"0",bind:this,"data-result":a,onclick:this._selectResultClick,onkeydown:this._selectResultClick},a.name)):null};b.prototype._getSourceName=function(a,b){return b===q.ALL_INDEX?m.all:a.name};b.prototype._countResults=function(a){return a?a.reduce(function(a,b){return a+b.results.length},0):0};return b}(k.declared(p));
f([d.renderable(),k.property()],c.prototype,"showMoreResultsOpen",void 0);f([k.property(),d.renderable(["viewModel.results","viewModel.selectedResult"])],c.prototype,"viewModel",void 0);f([d.accessibleHandler()],c.prototype,"_showMoreResultsClick",null);f([d.accessibleHandler()],c.prototype,"_selectResultClick",null);return c=f([k.subclass("esri.widgets.Search.SearchResultRenderer")],c)});