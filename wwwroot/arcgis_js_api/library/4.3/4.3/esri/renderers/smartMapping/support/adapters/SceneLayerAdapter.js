// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.3/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/promiseUtils ../../../../core/Error ./LayerAdapter ./FeatureLayerAdapter ../../../../core/accessorSupport/decorators".split(" "),function(d,n,h,k,e,f,l,m,g){d=function(d){function b(a){var c=d.call(this)||this;c._layer=a.layer;return c}h(b,d);b.prototype.getField=function(a){return this._layer.getField(a)};b.prototype.getFieldUsageInfo=function(a){var c=this._layer;return c.getField(a)?
c.getFieldUsageInfo(a):null};b.prototype.queryStatistics=function(a){return this._featureLayerAdapter?this._featureLayerAdapter.queryStatistics(a):e.reject(new f("scene-layer-adapter:not-supported","SceneLayer without companion FeatureLayer does not support statistics query"))};b.prototype.queryFeatureCount=function(a){return this._featureLayerAdapter?this._featureLayerAdapter.queryFeatureCount(a):e.reject(new f("scene-layer-adapter:not-supported","SceneLayer without companion FeatureLayer does not support count query"))};
b.prototype.generateRenderer=function(a){return this._featureLayerAdapter?this._featureLayerAdapter.generateRenderer(a):e.reject(new f("scene-layer-adapter:not-supported","SceneLayer without companion FeatureLayer does not support generateRenderer operation"))};b.prototype.getAllFeatures=function(a){return this._featureLayerAdapter?this._featureLayerAdapter.getAllFeatures(a):e.reject(new f("scene-layer-adapter:not-supported","SceneLayer without companion FeatureLayer is not supported"))};b.prototype.load=
function(){var a=this,c=this._layer,b=c.load().then(function(){var b=c.companionFeatureLayer;if(b)return a._featureLayerAdapter=new m({layer:b}),a._featureLayerAdapter.load().then(function(){a.geometryType=a._featureLayerAdapter.geometryType;a.objectIdField=a._featureLayerAdapter.objectIdField;a.supportsSQLExpression=a._featureLayerAdapter.supportsSQLExpression;a.hasLocalSource=a._featureLayerAdapter.hasLocalSource});a.geometryType=c.geometryType;a.objectIdField=c.objectIdField;a.supportsSQLExpression=
!1;a.hasLocalSource=!1});this.addResolvingPromise(b);return this};return b}(g.declared(l));return d=k([g.subclass()],d)});