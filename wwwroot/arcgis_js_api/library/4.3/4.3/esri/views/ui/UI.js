// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.3/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Component ../../core/Accessor ../../core/HandleRegistry ../../core/watchUtils dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-style".split(" "),function(f,z,u,k,h,l,v,w,q,r,m,g,n){function p(e){return"object"!==typeof e||e&&e.isInstanceOf&&e.isInstanceOf(l)||!("component"in e||"index"in e||"position"in e)?null:e}var x={left:0,top:0,bottom:0,right:0},
t={bottom:30,top:15,right:15,left:15};f=function(e){function c(){var a=e.call(this)||this;a._cornerNameToContainerLookup={};a._positionNameToContainerLookup={};a._components=[];a._handles=new w;a.padding=t;a.view=null;a._initContainers();return a}u(c,e);c.prototype.initialize=function(){this._handles.add([q.init(this,"view.padding, container",this._applyViewPadding.bind(this)),q.init(this,"padding",this._applyUIPadding.bind(this))])};c.prototype.destroy=function(){this.container=null;this._components.forEach(function(a){a.destroy()});
this._components.length=0;this._handles.destroy()};Object.defineProperty(c.prototype,"container",{set:function(a){var b=this._get("container");a!==b&&(a&&(m.add(a,"esri-ui"),this._attachContainers(a)),b&&(m.remove(b,"esri-ui"),n.set(b,{top:"",bottom:"",left:"",right:""}),g.empty(b)),this._set("container",a))},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"height",{get:function(){var a=this.get("view.height")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.top+
b.bottom),0)},enumerable:!0,configurable:!0});c.prototype.castPadding=function(a){return"number"===typeof a?{bottom:a,top:a,right:a,left:a}:r.mixin({},t,a)};Object.defineProperty(c.prototype,"width",{get:function(){var a=this.get("view.width")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.left+b.right),0)},enumerable:!0,configurable:!0});c.prototype.add=function(a,b){var y=this,d;if(Array.isArray(a))a.forEach(function(a){return y.add(a,b)});else{var c=p(a);c&&(d=c.index,b=
c.position,a=c.component);b&&"object"===typeof b&&(d=b.index,b=b.position);!a||b&&!this._isValidPosition(b)||(a&&a.isInstanceOf&&a.isInstanceOf(l)||(a=new l({node:a})),this._place({component:a,position:b,index:d}),this._components.push(a))}};c.prototype.remove=function(a){if(a){if(Array.isArray(a))return a.map(this.remove,this);if(a=this.find(a)){var b=this._components.indexOf(a);a.node.parentNode&&a.node.parentNode.removeChild(a.node);return this._components.splice(b,1)[0]}}};c.prototype.empty=function(a){var b=
this;if(Array.isArray(a))return a.map(function(a){return b.empty(a)}).reduce(function(a,b){return a.concat(b)});a=a||"manual";if("manual"===a)return Array.prototype.slice.call(this._manualContainer.children).filter(function(a){return!m.contains(a,"esri-ui-corner")}).map(function(a){return b.remove(a)});if(this._isValidPosition(a))return Array.prototype.slice.call(this._cornerNameToContainerLookup[a].children).map(this.remove,this)};c.prototype.move=function(a,b){var c=this;Array.isArray(a)&&a.forEach(function(a){return c.move(a,
b)});if(a){var d,e=p(a)||p(b);e&&(d=e.index,b=e.position,a=e.component||a);(!b||this._isValidPosition(b))&&(a=this.remove(a))&&this.add(a,{position:b,index:d})}};c.prototype.find=function(a){return a?a&&a.isInstanceOf&&a.isInstanceOf(l)?this._findByComponent(a):"string"===typeof a?this._findById(a):this._findByNode(a.domNode||a):null};c.prototype._getViewPadding=function(){return this.get("view.padding")||x};c.prototype._attachContainers=function(a){g.place(this._manualContainer,a);g.place(this._innerContainer,
a)};c.prototype._initContainers=function(){var a=g.create("div",{className:"esri-ui-inner-container esri-ui-corner-container"}),b=g.create("div",{className:"esri-ui-inner-container esri-ui-manual-container"}),c=g.create("div",{className:"esri-ui-top-left esri-ui-corner"},a),d=g.create("div",{className:"esri-ui-top-right esri-ui-corner"},a),e=g.create("div",{className:"esri-ui-bottom-left esri-ui-corner"},a),f=g.create("div",{className:"esri-ui-bottom-right esri-ui-corner"},a);this._innerContainer=
a;this._manualContainer=b;this._cornerNameToContainerLookup={"top-left":c,"top-right":d,"bottom-left":e,"bottom-right":f};this._positionNameToContainerLookup=r.mixin({manual:b},this._cornerNameToContainerLookup)};c.prototype._isValidPosition=function(a){return!!this._positionNameToContainerLookup[a]};c.prototype._place=function(a){var b=a.component,c=a.index;a=this._positionNameToContainerLookup[a.position||"manual"];var d;-1<c?(d=Array.prototype.slice.call(a.children),0===c?this._placeComponent(b,
a,"first"):c>=d.length?this._placeComponent(b,a,"last"):this._placeComponent(b,d[c],"before")):this._placeComponent(b,a,"last")};c.prototype._placeComponent=function(a,b,c){var d=a.widget;d&&!d._started&&"function"===typeof d.postMixInProperties&&"function"===typeof d.buildRendering&&"function"===typeof d.postCreate&&"function"===typeof d.startup&&a.widget.startup();g.place(a.node,b,c)};c.prototype._applyViewPadding=function(){var a=this.container;a&&n.set(a,this._toPxPosition(this._getViewPadding()))};
c.prototype._applyUIPadding=function(){this._innerContainer&&n.set(this._innerContainer,this._toPxPosition(this.padding))};c.prototype._toPxPosition=function(a){return{top:this._toPxUnit(a.top),left:this._toPxUnit(a.left),right:this._toPxUnit(a.right),bottom:this._toPxUnit(a.bottom)}};c.prototype._toPxUnit=function(a){return 0===a?0:a+"px"};c.prototype._findByComponent=function(a){var b=null,c;this._components.some(function(d){(c=d===a)&&(b=d);return c});return b};c.prototype._findById=function(a){var b=
null,c;this._components.some(function(d){(c=d.id===a)&&(b=d);return c});return b};c.prototype._findByNode=function(a){var b=null,c;this._components.some(function(d){(c=d.node===a)&&(b=d);return c});return b};return c}(h.declared(v));k([h.property()],f.prototype,"container",null);k([h.property()],f.prototype,"height",null);k([h.property()],f.prototype,"padding",void 0);k([h.cast("padding")],f.prototype,"castPadding",null);k([h.property()],f.prototype,"view",void 0);k([h.property()],f.prototype,"width",
null);return f=k([h.subclass("esri.views.ui.UI")],f)});