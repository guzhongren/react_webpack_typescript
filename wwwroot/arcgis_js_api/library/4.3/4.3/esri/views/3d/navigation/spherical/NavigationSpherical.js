// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.3/esri/copyright.txt for details.
//>>built
define("../Navigation ./ConstraintsSpherical ./AnimationSpherical ./actions/PanSpherical ./actions/ZoomSpherical ./actions/RotateSpherical ../../webgl-engine/lib/Camera ../../support/earthUtils ../../lib/glMatrix".split(" "),function(q,r,t,u,v,w,x,l,m){var a=m.vec3d,c=m.mat4d,n=a.create(),p=a.create(),f=c.create();return q.createSubclass([r,t],{declaredClass:"esri.views.3d.navigation.spherical.NavigationSpherical",initialize:function(){this.pan=new u({navigation:this});this.zoom=new v({navigation:this});
this.rotate=new w({navigation:this});this._intersectTerrainSelector.enableBackfacesTerrain=!1},getInitialCamera:function(){return new x(a.createFrom(4*l.earthRadius,0,0),a.createFrom(l.earthRadius,0,0),a.createFrom(0,0,1))},fixTargetUpVector:function(){this.cameras.target.computeUpOnSphere()},setPoiAuto:function(b,d){b=this.picker.pickAlongRay(this.cameras.target.eye,this.cameras.target.center,null,b);this.picker.pickedIntersectionPoint(b,n)&&(this.setCameraFromEyeAndCenter(this.cameras.target.eye,
n,{animate:!1}),a.set(this.cameras.target.center,this.cameras.current.center),d&&this.setCurrentToTarget())},rotateCameraWithPointsOnSphere:function(b,d,h,k,e){var g;null==e&&(e=a.length(b));g=Math.abs(a.length(d)-e);1E-4<=g&&(console.error("[NavigationSpherical.rotateCameraWithPointsOnSphere: invalid radius for target point (got "+e+", but expected "+a.length(d)+")"),e=a.length(d));g=Math.abs(a.length(b)-e);1E-4<=g&&(console.error("[NavigationSpherical.rotateCameraWithPointsOnSphere]: invalid radius for source point (got "+
e+", but expected "+a.length(b)+", "+b+")"),e=a.length(b));b=this.rotationFromPointsOnSphere(b,d,e,p);c.identity(f);c.rotate(f,b,p);c.multiplyVec3(f,h.eye,k.eye);c.multiplyVec3(f,h.center,k.center);c.multiplyVec3(f,h.up,k.up)},rotationFromPointsOnSphere:function(b,d,c,f){a.cross(b,d,f);return-Math.acos(1-a.dist2(b,d)/(2*c*c))}})});