// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.3/esri/copyright.txt for details.
//>>built
define(["../../../../core/declare","../../lib/glMatrix"],function(g,d){var f=d.vec2d,e=d.vec3d,b=e.create();return g([],{declaredClass:"esri.views.3d.navigation.mixins.ZoomMixin",type:"zoom",constructor:function(){this.normalizedAnchorPoint=f.create();this._lastStepAnimationId=-1},begin:function(a){this.navigation.begin(this);f.set(a,this._dragBeginPoint);this.normalizeCoordinate(a,this.normalizedAnchorPoint);a=this._toYDownCoord(this._dragBeginPoint);this.active=!0;this.emit("begin",a[0],a[1])},
update:function(a){},end:function(a){this.active=!1;a=this._toYDownCoord(this._dragBeginPoint);this.emit("end",a[0],a[1]);this.navigation.end(this)},stepScreen:function(a,c){this.active||(e.set(this.currentCamera.center,b),0<a&&(this.pickPointInScreen(c,b)||"local"!==this.navigation.view.viewingMode||this.pickFreePointInScreen(c,b)),this.step(Math.pow(.6,a),b,c))},step:function(a,c,b){if(!this.active){this.navigation.begin(this);this.navigation.currentHasAlmostReachedTarget()||this.navigation.animationId===
this._lastStepAnimationId?this.targetCamera.copyFrom(this.currentCamera):this.navigation.stop();var d=1E-6<e.dist(c,this.targetCamera.center);this.stepAtPoint(a,c,b,d);this._lastStepAnimationId=this.navigation.animationId;this.navigation.end(this)}},stepAtPoint:function(a,c,b,d){},_toYDownCoord:function(a){return[a[0],this.currentCamera.height-a[1]]}})});