// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.3/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../../core/watchUtils ../../../core/Collection ../../../core/HandleRegistry ../../../Graphic ../../../PopupTemplate ../../../tasks/support/FeatureSet ../../../renderers/support/jsonUtils ../../../renderers/SimpleRenderer ../engine/DOMContainer ./LayerView2D ./support/FeaturesView2D".split(" "),function(d,z,m,n,l,g,p,q,r,t,u,v,h,w,x,y){d=function(d){function b(){var a=
null!==d&&d.apply(this,arguments)||this;a._handles=new q;a._featuresViewMap={};a._targetFeaturesView=null;a._popupTemplates=new Map;a.container=new w;a.featuresViews=[];return a}m(b,d);b.prototype.hitTest=function(a,e){var k=this,b;this.featuresViews.forEach(function(c){c.hitTest(a,e)&&(b=c.hitTest(a,e),k._targetFeaturesView=c)});return b?b.then(function(a){a.popupTemplate=k._popupTemplates.get(k._targetFeaturesView);return a}):null};b.prototype.update=function(a){};b.prototype.attach=function(){var a=
this;this.layer.featureCollections.forEach(function(e){var b=u.fromJSON(e.featureSet),d=new (p.ofType(r))(b.features),c;if(a._featuresViewMap[b.geometryType])c=a._featuresViewMap[b.geometryType],c.graphics.addMany(d);else{c=e.layerDefinition.drawingInfo;e=e.popupInfo?t.fromJSON(e.popupInfo):null;var f=v.fromJSON(c.renderer);c=new y;c.graphics=d;c.mapView=a.view;c.renderer=f;a._featuresViewMap[b.geometryType]=c;a._popupTemplates.set(c,e);"polygon"!==b.geometryType||a.layer.polygonSymbol?"polyline"!==
b.geometryType||a.layer.lineSymbol?"point"!==b.geometryType||a.layer.pointSymbol||(a.layer.pointSymbol=f.symbol):a.layer.lineSymbol=f.symbol:a.layer.polygonSymbol=f.symbol;a.featuresViews.push(c);a.container.addChild(c.container)}});this._handles.add(g.init(this.layer,"polygonSymbol",function(b){a._featuresViewMap.polygon.renderer=new h({symbol:b})}));this._handles.add(g.init(this.layer,"lineSymbol",function(b){a._featuresViewMap.polyline.renderer=new h({symbol:b})}));this._handles.add(g.init(this.layer,
"pointSymbol",function(b){a._featuresViewMap.point.renderer=new h({symbol:b})}))};b.prototype.detach=function(){this._handles.removeAll()};b.prototype.moveStart=function(){};b.prototype.viewChange=function(){};b.prototype.moveEnd=function(){};return b}(l.declared(x));return d=n([l.subclass("esri.views.2d.layers.GeoRSSLayerView2D")],d)});