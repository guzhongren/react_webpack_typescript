// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.3/esri/copyright.txt for details.
//>>built
define("require exports ./basemapDefinitions ../core/accessorSupport/ensureType ../core/urlUtils ../core/Logger ../Basemap".split(" "),function(y,d,e,u,v,w,f){function k(a,b){var c;if("string"===typeof a){if(!(a in e))return b=Object.keys(e).map(function(a){return'"'+a+'"'}).join(", "),x.warn("Unable to find basemap definition for: "+a+". Try one of these: "+b),null;b&&(c=b[a]);c||(c=f.fromId(a),b&&(b[a]=c))}else c=u.default(f,a);return c}function l(a,b){return a.map(function(a){return b.find(function(b){var c=
g(a);b=g(b);return c.type===b.type&&c.url===b.url})||a})}function h(a){return a?!a.loaded&&a.resourceInfo?m(a.resourceInfo):{baseLayers:n(a.baseLayers),referenceLayers:n(a.referenceLayers)}:null}function n(a){return(Array.isArray(a)?a:a.toArray()).map(g)}function g(a){return{type:a.type,url:p(a.urlTemplate||a.url||a.styleUrl)}}function m(a){return a?{baseLayers:q(a.baseMapLayers.filter(function(a){return!a.isReference})),referenceLayers:q(a.baseMapLayers.filter(function(a){return a.isReference}))}:
null}function q(a){return a.map(function(a){var b;switch(a.layerType){case "VectorTileLayer":b="vector-tile";break;case "ArcGISTiledMapServiceLayer":b="tile";break;default:b="unknown"}return{type:b,url:p(a.templateUrl||a.urlTemplate||a.styleUrl||a.url)}})}function r(a,b,c){return null!=a!==(null!=b)?"not-equal":a?t(a.baseLayers,b.baseLayers)?t(a.referenceLayers,b.referenceLayers)?"equal":c.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function t(a,b){return a.length!==b.length?
!1:!a.some(function(a){return!b.some(function(b){return a.type===b.type&&a.url===b.url})})}function p(a){return a?v.normalize(a).replace(/^\s*https?:/i,"").toLowerCase():""}var x=w.getLogger("esri.Basemap");d.createCache=function(){return{}};d.ensureType=k;d.clonePreservingTiledLayers=function(a,b){void 0===b&&(b=null);a=k(a);if(!a)return null;a=new f({id:a.id,title:a.title,baseLayers:a.baseLayers.slice(),referenceLayers:a.referenceLayers.slice()});b&&(a.baseLayers=l(a.baseLayers,b.baseLayers),a.referenceLayers=
l(a.referenceLayers,b.referenceLayers));return a};d.wellKnownBasemapId=function(a){var b=null;a=h(a);for(var c in e){var d=m(e[c]),d=r(a,d,{mustMatchReferences:!1});if("equal"===d){b=c;break}else"base-layers-equal"===d&&(b=c)}return b};d.contentEquals=function(a,b){if(a===b)return!0;a=h(a);b=h(b);return"equal"===r(a,b,{mustMatchReferences:!0})}});